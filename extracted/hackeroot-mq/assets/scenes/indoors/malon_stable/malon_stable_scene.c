#include "ultra64.h"
#include "z64.h"
#include "macros.h"
#include "malon_stable_scene.h"
#include "segment_symbols.h"
#include "command_macros_base.h"
#include "z64cutscene_commands.h"
#include "variables.h"
#include "assets/misc/link_animetion/link_animetion.h"
#include "assets/objects/gameplay_keep/gameplay_keep.h"
#include "malon_stable_room_0.h"

SceneCmd malon_stable_sceneCommands[] = {
    SCENE_CMD_SOUND_SETTINGS(5, 19, 31),
    SCENE_CMD_ROOM_LIST(1, malon_stable_sceneRoomList0x000080),
    SCENE_CMD_TRANSITION_ACTOR_LIST(1, malon_stable_sceneTransitionActorList_000070),
    SCENE_CMD_MISC_SETTINGS(0x20, 0x00000013),
    SCENE_CMD_COL_HEADER(&malon_stable_sceneCollisionHeader_000644),
    SCENE_CMD_ENTRANCE_LIST(malon_stable_sceneEntranceList0x000088),
    SCENE_CMD_SPECIAL_FILES(NAVI_QUEST_HINTS_OVERWORLD, OBJECT_GAMEPLAY_FIELD_KEEP),
    SCENE_CMD_SPAWN_LIST(1, malon_stable_sceneStartPositionList0x000060),
    SCENE_CMD_SKYBOX_SETTINGS(15, 0, true),
    SCENE_CMD_EXIT_LIST(malon_stable_sceneExitList_00008C),
    SCENE_CMD_ENV_LIGHT_SETTINGS(1, malon_stable_sceneLightSettings0x000090),
    SCENE_CMD_END(),
};

ActorEntry malon_stable_sceneStartPositionList0x000060[] = {
    { ACTOR_PLAYER,     {    147,      0,    234 }, {      0, 0XC000,      0 }, 0x0EFF },
};

TransitionActorEntry malon_stable_sceneTransitionActorList_000070[] = {
    { 0, 0, 0, 255, ACTOR_EN_DOOR, 190, 0, 230, 16384, 0x01BF },
};

RomFile malon_stable_sceneRoomList0x000080[] = {
    { (uintptr_t)_malon_stable_room_0SegmentRomStart, (uintptr_t)_malon_stable_room_0SegmentRomEnd },
};

Spawn malon_stable_sceneEntranceList0x000088[] = {
    { 0x00, 0x00 },
    { 0x00, 0x00 },
};

u16 malon_stable_sceneExitList_00008C[] = {
    ENTR_LON_LON_RANCH_5,
    ENTR_DEKU_TREE_0,
};

EnvLightSettings malon_stable_sceneLightSettings0x000090[] = {
    { 0x50, 0x46, 0x28, 0x56, 0x4F, 0xD1, 0xE6, 0xE6, 0xC8, 0x8B, 0xD4, 0x11, 0xC8, 0xAA, 0xAA, 0x0A, 0x0A, 0x0A,
    0x07E0, 0x07D0 },
};

u8 malon_stable_scene_possiblePadding_0000A8[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
};

Vec3s malon_stable_sceneCollisionHeader_000644CamPosData[] = {
    {     50,    720,   -144 },
    {  13835,   5461,      0 },
    {   5000,     -1,     -1 },
    {      0,     60,      0 },
    {      0,      0,      0 },
    {   6000,     -1,     -1 },
};

BgCamInfo malon_stable_sceneCollisionHeader_000644CamDataList[] = {
    { 0x0019, 3, &malon_stable_sceneCollisionHeader_000644CamPosData[0] },
    { 0x001A, 3, &malon_stable_sceneCollisionHeader_000644CamPosData[3] },
    { 0x0000, 0, NULL },
};

SurfaceType malon_stable_sceneCollisionHeader_000644SurfaceType[] = {
    {0x00000002, 0x00000FCA},   {0x00000102, 0x00000FCA},   {0x00000002, 0x0000080A},   {0x00000002, 0x00000FC8},
};

CollisionPoly malon_stable_sceneCollisionHeader_000644Polygons[] = {
    {0x0000, 0x0000, 0x0001, 0x0002, 0x0000, 0x0000, 0x8001, 0x012C},
    {0x0000, 0x0000, 0x0002, 0x0003, 0x0000, 0x0000, 0x8001, 0x012C},
    {0x0000, 0x0000, 0x0004, 0x0005, 0x7FFF, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x0000, 0x0005, 0x0001, 0x7FFF, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x0006, 0x0007, 0x0008, 0x8001, 0x0000, 0x0000, 0x021C},
    {0x0000, 0x0006, 0x0008, 0x0009, 0x8001, 0x0000, 0x0000, 0x021C},
    {0x0000, 0x000A, 0x0009, 0x0008, 0x0000, 0x0000, 0x8001, 0x00A0},
    {0x0000, 0x000A, 0x0008, 0x000B, 0x0000, 0x0000, 0x8001, 0x00A0},
    {0x0000, 0x000B, 0x0008, 0x0007, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0000, 0x000B, 0x0007, 0x000C, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0000, 0x0000, 0x0003, 0x000C, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0000, 0x0000, 0x000C, 0x0004, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0000, 0x0005, 0x0004, 0x0007, 0x0000, 0x0000, 0x7FFF, 0x012C},
    {0x0000, 0x0005, 0x0007, 0x0006, 0x0000, 0x0000, 0x7FFF, 0x012C},
    {0x0000, 0x000D, 0x000E, 0x000F, 0x0000, 0x0000, 0x8001, 0x0104},
    {0x0000, 0x000D, 0x000F, 0x0010, 0x0000, 0x0000, 0x8001, 0x0104},
    {0x0000, 0x0011, 0x0012, 0x000E, 0x0000, 0x8001, 0x0000, 0x0064},
    {0x0000, 0x0011, 0x000E, 0x000D, 0x0000, 0x8001, 0x0000, 0x0064},
    {0x0000, 0x0013, 0x0014, 0x0012, 0x0000, 0x0000, 0x7FFF, 0xFF38},
    {0x0000, 0x0013, 0x0012, 0x0011, 0x0000, 0x0000, 0x7FFF, 0xFF38},
    {0x0000, 0x000A, 0x0011, 0x000D, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000A, 0x000D, 0x0002, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000D, 0x0010, 0x0003, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000D, 0x0003, 0x0002, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000A, 0x000B, 0x0013, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000A, 0x0013, 0x0011, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000B, 0x000A, 0x0015, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x000B, 0x0015, 0x0016, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0000, 0x0017, 0x0016, 0x0015, 0x0000, 0x0000, 0x8001, 0x0028},
    {0x0000, 0x0017, 0x0015, 0x0018, 0x0000, 0x0000, 0x8001, 0x0028},
    {0x0000, 0x0019, 0x001A, 0x001B, 0x0000, 0x0000, 0x7FFF, 0x00B4},
    {0x0000, 0x0019, 0x001B, 0x001C, 0x0000, 0x0000, 0x7FFF, 0x00B4},
    {0x0000, 0x0010, 0x001D, 0x001E, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0000, 0x0010, 0x001E, 0x0013, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0001, 0x001D, 0x001F, 0x0020, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0001, 0x001D, 0x0020, 0x001E, 0x0000, 0x7FFF, 0x0000, 0x0000},
    {0x0002, 0x0010, 0x000D, 0x0011, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0002, 0x0010, 0x0011, 0x0013, 0x8001, 0x0000, 0x0000, 0x00B4},
    {0x0003, 0x0021, 0x0022, 0x0023, 0x0000, 0x7FFF, 0x0000, 0xFFF6},
    {0x0003, 0x0021, 0x0023, 0x0024, 0x0000, 0x7FFF, 0x0000, 0xFFF6},
    {0x0000, 0x0025, 0x0022, 0x0021, 0x0000, 0x0000, 0x7FFF, 0xFEDC},
    {0x0000, 0x0025, 0x0021, 0x0026, 0x0000, 0x0000, 0x7FFF, 0xFEDC},
    {0x0000, 0x0027, 0x0023, 0x0022, 0x7FFF, 0x0000, 0x0000, 0x0047},
    {0x0000, 0x0027, 0x0022, 0x0025, 0x7FFF, 0x0000, 0x0000, 0x0047},
    {0x0000, 0x0028, 0x0024, 0x0023, 0x0000, 0x0000, 0x8001, 0x00E4},
    {0x0000, 0x0028, 0x0023, 0x0027, 0x0000, 0x0000, 0x8001, 0x00E4},
    {0x0000, 0x0026, 0x0021, 0x0024, 0x8001, 0x0000, 0x0000, 0xFF57},
    {0x0000, 0x0026, 0x0024, 0x0028, 0x8001, 0x0000, 0x0000, 0xFF57},
    {0x0000, 0x0029, 0x002A, 0x002B, 0x0000, 0x0000, 0x8001, 0x0114},
    {0x0000, 0x0029, 0x002B, 0x002C, 0x0000, 0x0000, 0x8001, 0x0114},
    {0x0000, 0x002A, 0x0029, 0x002D, 0x8001, 0x0000, 0x0000, 0x0058},
    {0x0000, 0x002A, 0x002D, 0x002E, 0x8001, 0x0000, 0x0000, 0x0058},
    {0x0000, 0x002F, 0x002C, 0x002B, 0x7FFF, 0x0000, 0x0000, 0xFF90},
    {0x0000, 0x002F, 0x002B, 0x0030, 0x7FFF, 0x0000, 0x0000, 0xFF90},
    {0x0000, 0x0031, 0x0032, 0x0033, 0x0000, 0x0000, 0x8001, 0xFFCE},
    {0x0000, 0x0031, 0x0033, 0x0034, 0x0000, 0x0000, 0x8001, 0xFFCE},
    {0x0000, 0x0035, 0x0033, 0x0032, 0x7FFF, 0x0000, 0x0000, 0xFFCE},
    {0x0000, 0x0035, 0x0032, 0x0036, 0x7FFF, 0x0000, 0x0000, 0xFFCE},
    {0x0000, 0x0034, 0x0037, 0x0038, 0x8001, 0x0000, 0x0000, 0xFFCE},
    {0x0000, 0x0034, 0x0038, 0x0031, 0x8001, 0x0000, 0x0000, 0xFFCE},
    {0x0000, 0x0037, 0x0035, 0x0036, 0x0000, 0x0000, 0x7FFF, 0xFFCE},
    {0x0000, 0x0037, 0x0036, 0x0038, 0x0000, 0x0000, 0x7FFF, 0xFFCE},
};

Vec3s malon_stable_sceneCollisionHeader_000644Vertices[] = {
    {   -180,      0,    300 },
    {   -180,    120,    300 },
    {    180,    120,    300 },
    {    180,      0,    300 },
    {   -180,      0,   -300 },
    {   -180,    120,   -300 },
    {    540,    120,   -300 },
    {    540,      0,   -300 },
    {    540,      0,    160 },
    {    540,    120,    160 },
    {    180,    120,    160 },
    {    180,      0,    160 },
    {    180,      0,   -300 },
    {    180,    100,    260 },
    {    200,    100,    260 },
    {    200,      0,    260 },
    {    180,      0,    260 },
    {    180,    100,    200 },
    {    200,    100,    200 },
    {    180,      0,    200 },
    {    200,      0,    200 },
    {    180,    120,     40 },
    {    180,      0,     40 },
    {    540,      0,     40 },
    {    540,    120,     40 },
    {   -180,      0,   -180 },
    {    540,      0,   -180 },
    {    540,    120,   -180 },
    {   -180,    120,   -180 },
    {    190,      0,    260 },
    {    190,      0,    200 },
    {    260,      0,    260 },
    {    260,      0,    200 },
    {   -169,     10,    292 },
    {    -71,     10,    292 },
    {    -71,     10,    228 },
    {   -169,     10,    228 },
    {    -71,      0,    292 },
    {   -169,      0,    292 },
    {    -71,      0,    228 },
    {   -169,      0,    228 },
    {     88,      0,    276 },
    {     88,    120,    276 },
    {    112,    120,    276 },
    {    112,      0,    276 },
    {     88,      0,    300 },
    {     88,    120,    300 },
    {    112,      0,    300 },
    {    112,    120,    300 },
    {    -50,    127,    -50 },
    {     50,    127,    -50 },
    {     50,      0,    -50 },
    {    -50,      0,    -50 },
    {     50,      0,     50 },
    {     50,    127,     50 },
    {    -50,      0,     50 },
    {    -50,    127,     50 },
};

CollisionHeader malon_stable_sceneCollisionHeader_000644 = { 
    { -180, 0, -300 },
    { 540, 400, 300 },
    ARRAY_COUNT(malon_stable_sceneCollisionHeader_000644Vertices), malon_stable_sceneCollisionHeader_000644Vertices,
    ARRAY_COUNT(malon_stable_sceneCollisionHeader_000644Polygons), malon_stable_sceneCollisionHeader_000644Polygons,
    malon_stable_sceneCollisionHeader_000644SurfaceType,
    malon_stable_sceneCollisionHeader_000644CamDataList,
    0, NULL
};

